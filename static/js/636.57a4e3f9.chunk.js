"use strict";(self.webpackChunkmobrix_ui_app=self.webpackChunkmobrix_ui_app||[]).push([[636],{8168:(e,t,n)=>{function r(){return r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{A:()=>r})},2193:(e,t,n)=>{n.r(t),n.d(t,{initMoBrixDesigner:()=>u});var r=n(9950),o=n(7081),i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},i(e,t)},a=function(){return a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a.apply(this,arguments)},l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hasError:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.getDerivedStateFromError=function(e){return{hasError:!0}},t.prototype.componentDidCatch=function(e,t){this.setState({hasError:!0})},t.prototype.render=function(){return this.state.hasError?(window.document.title="Error",this.props.fallback||r.createElement("div",{style:{width:"100vw",height:"100vh",display:"flex",flexDirection:"column"}},r.createElement("div",{style:{margin:"auto"}},r.createElement("button",{style:{fontSize:"3rem",padding:"1rem"},className:"error-button",onClick:function(){window.location.reload()}},"Try again")))):this.props.children},t}(r.Component),c=function(e){var t=e.creatorConfig,n=e.children,o=t.content,i=t.header,a=t.footer;return r.createElement("div",{id:"basic-app",style:{height:"100%",width:"100vw",display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden",position:"relative"}},i&&r.createElement("header",{style:{position:"relative",top:"0",right:"0",left:"0",width:"100%"}},r.createElement(i,null)),n,o&&r.createElement(o,null),a&&r.createElement("footer",{style:{width:"100%",bottom:"0",left:"0",right:"0"}},r.createElement(a,null)))},p=function(e){var t=e.creatorConfig,n=e.store,i=e.externalComponents,a=e.internalComponents;return r.createElement(o.Kq,{store:n},i.map((function(e,o){return r.createElement("div",{key:"plugin_".concat(o,"_external_component")},r.createElement(e,{creatorConfig:t,store:n}))})),r.createElement(c,{creatorConfig:t},r.createElement("div",{style:{height:"100%",overflow:"auto",width:"100%"}},a.map((function(e,o){return r.createElement("div",{key:"plugin_".concat(o,"_internal_component")},r.createElement(e,{creatorConfig:t,store:n}))})))))},s=function(e){var t=e.creatorConfig,n=e.store,o=e.externalComponents,i=e.internalComponents,a=t.preloader;return r.createElement(r.Suspense,{fallback:a?r.createElement(a,null):r.createElement("div",null)},r.createElement(l,{fallback:t.error},r.createElement("div",{id:"app-container",style:{height:"".concat(window.innerHeight,"px")}},n?r.createElement(p,{store:n,creatorConfig:t,internalComponents:i,externalComponents:o}):r.createElement(c,{creatorConfig:t}))))},u=function(e){var t,n,o,i={},l=[],c=[];if(e&&(t=e.store,n=e.creatorConfig,i=a(a({},o=n||{}),{core:o.core||{},plugins:o.plugins||[]}),e.engineConfig,t)){var p=function(e,t){var n,r=a({},e),o=r.plugins,i={},l={},c=[],p=[],s=[];return o.forEach((function(e){if(e.feature&&"mobrix-designer-plugin"===e.type){i[e.feature]={};var t=e();if(t.field){var n=t.field(r);n&&n.name&&(l[e.feature]=n.name,i[e.feature]=n.content,r[n.name]=n.content||{})}t.internalComponent&&p.push(t.internalComponent),t.externalComponent&&c.push(t.externalComponent),t.before&&s.push(t.before)}})),(null===(n=null==t?void 0:t.core)||void 0===n?void 0:n.designerInteractions)&&t.core.designerInteractions.forEach((function(e){i[e.plugin]&&l[e.plugin]&&(r[l[e.plugin]]=e.effect(i[e.plugin],t),i[e.plugin]=r[l[e.plugin]])})),s.forEach((function(e){return e(r)})),{externalComponents:c,internalComponents:p,engineConfig:t,creatorConfig:r}}(i,e.engineConfig);c=p.externalComponents,l=p.internalComponents,i=p.creatorConfig}var u=function(){var e=window.document.getElementById("app-container");e&&(e.style.height="".concat(window.innerHeight,"px"))};return window.addEventListener("resize",u),window.addEventListener("orientationchange",u),{App:r.createElement(s,{store:t,creatorConfig:i,internalComponents:l,externalComponents:c}),config:i}}}}]);